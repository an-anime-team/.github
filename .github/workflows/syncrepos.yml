# Sync repo to the Codeberg mirror
name: Mirror Sync
on:
  workflow_dispatch: # Manual dispatch
  schedule:
    - cron: "0 */12 * * *"
jobs:
  codebergdawn:
    runs-on: ubuntu-latest
    steps:
      - run: |
          git clone ${{ secrets.NABDAWN }}
          cd dawn
      - uses: yesolutions/mirror-action@v0.6.0
        with:
          REMOTE: ${{ secrets.CBDAWN }}
          GIT_SSH_PRIVATE_KEY: ${{ secrets.CODEBERG_SSH }}
          GIT_SSH_NO_VERIFY_HOST: "true"
  codebergdusk:
    runs-on: ubuntu-latest
    steps:
      - run: |
          git clone ${{ secrets.NABDUSK }}
          cd dusk
      - uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: ${{ secrets.CBDUSK }}
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
  codebergastra:
    runs-on: ubuntu-latest
    steps:
      - run: |
          git clone ${{ secrets.NABASTRA }}
          cd dusk
      - uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: ${{ secrets.CBASTRA }}
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
