# Sync repo to the Codeberg mirror
name: Mirror Sync
on:
  workflow_dispatch: # Manual dispatch
  schedule:
    - cron: "0 */12 * * *"
jobs:
  codebergdawn:
    runs-on: ubuntu-latest
    steps:
      - run: git clone ${{ secrets.NABDAWN }}
      - uses:  Mar0xy/repository-mirroring-action@main
        with:
          target_repo_url: ${{ secrets.CBDAWN }}
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
          directory: "dawn"
  codebergdusk:
    runs-on: ubuntu-latest
    steps:
      - run: git clone ${{ secrets.NABDUSK }}
      - uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: ${{ secrets.CBDUSK }}
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
          directory: "dusk"
  codebergastra:
    runs-on: ubuntu-latest
    steps:
      - run: git clone ${{ secrets.NABASTRA }}
      - uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: ${{ secrets.CBASTRA }}
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
          directory: "astra"
